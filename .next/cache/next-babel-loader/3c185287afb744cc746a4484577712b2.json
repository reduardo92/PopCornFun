{"ast":null,"code":"import { MongoClient } from 'mongodb';\nimport nextConnect from 'next-connect';\nconst client = new MongoClient(process.env.MONGODB_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\nasync function database(req, res, next) {\n  if (!client.isConnected()) await client.connect();\n  req.dbClient = client;\n  req.db = client.db('sample_mflix');\n  console.log('MongoDB connected...');\n  return next();\n}\n\nconst middleware = nextConnect();\nmiddleware.use(database);\nexport default middleware;","map":{"version":3,"sources":["C:/Users/Eduardo Rivas/Desktop/react_Study/popcornFun/server/middleware/database.js"],"names":["MongoClient","nextConnect","client","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","database","req","res","next","isConnected","connect","dbClient","db","console","log","middleware","use"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AAEA,MAAMC,MAAM,GAAG,IAAIF,WAAJ,CAAgBG,OAAO,CAACC,GAAR,CAAYC,WAA5B,EAAyC;AACtDC,EAAAA,eAAe,EAAE,IADqC;AAEtDC,EAAAA,kBAAkB,EAAE;AAFkC,CAAzC,CAAf;;AAKA,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AACtC,MAAI,CAACT,MAAM,CAACU,WAAP,EAAL,EAA2B,MAAMV,MAAM,CAACW,OAAP,EAAN;AAC3BJ,EAAAA,GAAG,CAACK,QAAJ,GAAeZ,MAAf;AACAO,EAAAA,GAAG,CAACM,EAAJ,GAASb,MAAM,CAACa,EAAP,CAAU,cAAV,CAAT;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,SAAON,IAAI,EAAX;AACD;;AAED,MAAMO,UAAU,GAAGjB,WAAW,EAA9B;AAEAiB,UAAU,CAACC,GAAX,CAAeX,QAAf;AAEA,eAAeU,UAAf","sourcesContent":["import { MongoClient } from 'mongodb';\r\nimport nextConnect from 'next-connect';\r\n\r\nconst client = new MongoClient(process.env.MONGODB_URI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true\r\n});\r\n\r\nasync function database(req, res, next) {\r\n  if (!client.isConnected()) await client.connect();\r\n  req.dbClient = client;\r\n  req.db = client.db('sample_mflix');\r\n  console.log('MongoDB connected...');\r\n  return next();\r\n}\r\n\r\nconst middleware = nextConnect();\r\n\r\nmiddleware.use(database);\r\n\r\nexport default middleware;\r\n"]},"metadata":{},"sourceType":"module"}