{"version":3,"file":"static/webpack/static\\development\\pages\\movie\\[id].js.fdb5cd0bd7c5a4ec2bf4.hot-update.js","sources":["webpack:///./pages/movie/.jsx"],"sourcesContent":["import { useContext } from 'react';\r\nimport styled from 'styled-components';\r\nimport movieDB from '../../components/utility/movieDB';\r\nimport { IMG_URL_OR, IMG_URL } from '../../components/context/types';\r\nimport CirclePercentage from '../../components/ui/CirclePercentage';\r\nimport TagGroup from '../../components/ui/TagGroup';\r\nimport Link from 'next/link';\r\nimport PlayButton from '../../components/ui/PlayButton';\r\nimport TopBilledCast from '../../components/ui/TopBilledCast';\r\nimport ReviewSection from '../../components/ui/ReviewSection';\r\nimport MediaSection from '../../components/ui/MediaSection';\r\nimport MovieContext from '../../components/context/MovieContext';\r\nimport Layout from '../../components/layout';\r\n\r\nconst Styled = styled.section`\r\n  background: var(--bg-gradient);\r\n  margin-top: 110px;\r\n\r\n  .profile--backdrop {\r\n    background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),\r\n      url(${({ bgImg }) => `${IMG_URL_OR}${bgImg}`}) no-repeat center;\r\n    background-color: black;\r\n    min-height: 400px;\r\n    background-size: cover;\r\n    background-position: top;\r\n    object-fit: cover;\r\n    position: relative;\r\n\r\n    &__img {\r\n      position: absolute;\r\n      bottom: -20vw;\r\n      left: 20px;\r\n      width: 120px;\r\n    }\r\n  }\r\n\r\n  .profile--header {\r\n    position: relative;\r\n    padding: 2em 0.5em;\r\n    max-width: 750px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .profile--header__content {\r\n    display: grid;\r\n    grid-gap: 1.7em;\r\n    grid-auto-columns: auto;\r\n\r\n    .rating {\r\n      svg {\r\n        margin-right: calc(3vw + 0.5em);\r\n      }\r\n    }\r\n  }\r\n\r\n  .head {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr;\r\n    grid-gap: 1em;\r\n    padding: 0 1em 0.5em;\r\n\r\n    .title {\r\n      align-self: center;\r\n      font-size: calc(0.5em + 3vw);\r\n    }\r\n  }\r\n\r\n  /* profile--header__img */\r\n  .profile--header__img {\r\n    width: 120px;\r\n    margin-top: -8em;\r\n    align-self: flex-end;\r\n  }\r\n\r\n  .year {\r\n    opacity: 0.6;\r\n    font-weight: 400;\r\n  }\r\n\r\n  .rating,\r\n  .meta {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 0.5em;\r\n  }\r\n\r\n  .tag--group {\r\n    border-left: 1px solid #7b7b7b;\r\n    padding-left: 1.5em;\r\n  }\r\n\r\n  /* /// */\r\n  .meta {\r\n    justify-content: space-between;\r\n    font-size: 0.85rem;\r\n\r\n    &--tab {\r\n      border-right: 1px solid #7b7b7b;\r\n      padding-right: 1em;\r\n      text-align: center;\r\n    }\r\n    &--tab:last-child {\r\n      border: none;\r\n    }\r\n  }\r\n  /* /// */\r\n\r\n  .crew {\r\n    /* margin: 1em 0; */\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    grid-gap: 1em;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .play--button {\r\n    width: fit-content;\r\n  }\r\n\r\n  @media screen and (min-width: 768px) {\r\n    .profile--header {\r\n      max-width: 900px;\r\n      padding: 2em 1em;\r\n    }\r\n\r\n    .head .profile--header__img {\r\n      width: 160px;\r\n    }\r\n\r\n    .rating {\r\n      grid-column: 1 /2;\r\n    }\r\n\r\n    .meta {\r\n      grid-column: 2 /3;\r\n    }\r\n\r\n    .head,\r\n    .overview,\r\n    .crew {\r\n      grid-column: 1/ 3;\r\n    }\r\n\r\n    .play--button {\r\n      flex-direction: row;\r\n      font-size: 1.1rem;\r\n\r\n      &::before {\r\n        width: auto;\r\n        margin: auto;\r\n        transform-origin: left;\r\n      }\r\n\r\n      svg {\r\n        font-size: 2rem;\r\n        order: 1;\r\n        margin-left: 5px;\r\n      }\r\n\r\n      &:hover svg,\r\n      &:focus svg {\r\n        margin-left: 15px;\r\n        margin-bottom: 0;\r\n        transform: scale(0.98);\r\n      }\r\n    }\r\n\r\n    .CircularProgressbar {\r\n      width: 66px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst credits = arry => {\r\n  const arrData = arry.reduce((acc, obj) => {\r\n    let key = obj.name;\r\n    if (!acc[key]) {\r\n      acc[key] = [];\r\n    }\r\n    acc[key].push(obj);\r\n    return acc;\r\n  }, []);\r\n\r\n  const joinData = Object.entries(arrData)\r\n    .map(([key, value]) => {\r\n      let department = value.map(item => item.department);\r\n      let item = arrData[key].map(item => ({ ...item, department }));\r\n      return item;\r\n    })\r\n    .sort((a, b) => b.length - a.length);\r\n\r\n  return joinData;\r\n};\r\n\r\nconst MovieProfile = ({ movie, typeFor }) => {\r\n  const { setData } = useContext(MovieContext);\r\n\r\n  const af = {};\r\n\r\n  console.log(af && 'true');\r\n\r\n  return (\r\n    <Layout>\r\n      <Styled className='profile' bgImg={movie.backdrop_path}>\r\n        <div className='profile--backdrop' />\r\n        <div className='profile--header'>\r\n          <div className='profile--header__content'>\r\n            <div className='head'>\r\n              <div className='profile--header__img'>\r\n                <img\r\n                  className='poster'\r\n                  src={`${IMG_URL}${movie.poster_path || movie.profile_path}`}\r\n                  alt={movie.title || movie.name}\r\n                />\r\n              </div>\r\n              <h2 className='title'>\r\n                {movie.title || movie.name}{' '}\r\n                <span className='year'>({movie.release_date.slice(0, 4)})</span>\r\n              </h2>\r\n            </div>\r\n            <div className='rating'>\r\n              <CirclePercentage value={movie.vote_average * 10} />\r\n              <TagGroup />\r\n            </div>\r\n            <div className='meta'>\r\n              <span className='release meta--tab'>2017</span>\r\n              <span className='runtime meta--tab'>1h 02 mins</span>\r\n              <span className='rating meta--tab'>R</span>\r\n              <span className='genre meta--tab'>Action,Drama,Sci-fi</span>\r\n            </div>\r\n            <div className='overview'>\r\n              <h3 className='subTitle'>OVERVIEW</h3>\r\n              <p className='overview--para'>{movie.overview}</p>\r\n            </div>\r\n            <div className='crew'>\r\n              {credits(movie.credits.crew).map(\r\n                (c, i) =>\r\n                  i < 6 && (\r\n                    <div key={c[0].id} className='crew--person'>\r\n                      <Link href='/person/[id]' as={`/person/${c[0].id}`}>\r\n                        {c[0].name}\r\n                      </Link>\r\n                      <small className='d-block mt-1'>\r\n                        {c[0].department.join(', ')}\r\n                      </small>\r\n                    </div>\r\n                  )\r\n              )}\r\n            </div>\r\n            <PlayButton onclick={() => setData(movie.videos.results[1].key)} />\r\n          </div>\r\n        </div>\r\n        <TopBilledCast data={movie.credits.cast} />\r\n        <ReviewSection data={movie.reviews.results} movieId={movie.id} />\r\n        <MediaSection\r\n          data={movie}\r\n          videos={movie.videos.results}\r\n          posters={movie.images.posters}\r\n          backdrops={movie.images.backdrops}\r\n          typeId={movie.id}\r\n        />\r\n      </Styled>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nMovieProfile.getInitialProps = async ctx => {\r\n  console.log(ctx.query, 'ID');\r\n  console.log(ctx);\r\n\r\n  //   const url = ctx.asPath.slice(1);\r\n  try {\r\n    const movie = await movieDB(\r\n      `movie/${ctx.query.id}`,\r\n      'append_to_response=account_states,external_ids,keywords,release_dates,videos,recommendations,reviews,credits,images&include_image_language=en,null'\r\n    );\r\n    return {\r\n      movie\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport default MovieProfile;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AACA;AAwJA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAMA;AANA;AAWA;AADA;AACA;AAXA;AAAA;AAAA;AAcA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAiBA;;;;A","sourceRoot":""}