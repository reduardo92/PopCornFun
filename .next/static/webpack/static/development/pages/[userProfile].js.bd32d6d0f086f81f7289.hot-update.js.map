{"version":3,"file":"static/webpack/static\\development\\pages\\[userProfile].js.bd32d6d0f086f81f7289.hot-update.js","sources":["webpack:///./pages/[userProfile]/index.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport Layout from '../../components/layout';\r\nimport UserProfileTabs from '../../components/ui/userProfile/userProfileTabs';\r\nimport UserProfileHead from '../../components/ui/userProfile/UserProfileHead';\r\nimport { SITE_URL } from '../../components/context/types';\r\nimport getAuthToken from '../../components/utility/setAuthToken';\r\nimport axios from 'axios';\r\nimport Router from 'next/router';\r\nimport { useContext } from 'react';\r\nimport AuthContext from '../../components/context/auth/AuthContext';\r\n\r\nconst Styled = styled.section`\r\n  margin-top: 6em;\r\n`;\r\n\r\nconst userProfile = ({ watchlist, favorites, ratings }) => {\r\n  const { isAuthentucated } = useContext(AuthContext);\r\n\r\n  console.log(watchlist, favorites, ratings);\r\n\r\n  useEffect(() => {\r\n    if (isAuthentucated) return;\r\n    Router.push('/');\r\n  }, [isAuthentucated]);\r\n\r\n  return (\r\n    <Layout>\r\n      <Styled className='userProfile'>\r\n        <UserProfileHead />\r\n        <UserProfileTabs />\r\n        <div className='userProfile--mainContet'>Hello</div>\r\n      </Styled>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default userProfile;\r\n\r\nuserProfile.getInitialProps = async (ctx) => {\r\n  const cookie = ctx.req?.headers.cookie;\r\n\r\n  const data = await axios.all(\r\n    [\r\n      await axios.get(`${SITE_URL}/api/watchlist`),\r\n      await axios.get(`${SITE_URL}/api/favorites`),\r\n      await axios.get(`${SITE_URL}/api/ratings`),\r\n    ],\r\n    { headers: { cookie } }\r\n  );\r\n\r\n  if (data.status === 401 && !ctx.req) {\r\n    Router.replace('/login');\r\n    return {};\r\n  }\r\n\r\n  if (data.status === 401 && ctx.req) {\r\n    ctx.res.writeHead(302, {\r\n      Location: `${SITE_URL}/login`,\r\n    });\r\n    ctx.res.end();\r\n    return;\r\n  }\r\n\r\n  return {\r\n    watchlist: data[0].data,\r\n    favorites: data[1].data,\r\n    ratings: data[2].data,\r\n  };\r\n};\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AATA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AAYA;AAbA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAiBA;AACA;AADA;AAGA;AArBA;AACA;AADA;AAAA;AA0BA;AACA;AACA;AAHA;AACA;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}